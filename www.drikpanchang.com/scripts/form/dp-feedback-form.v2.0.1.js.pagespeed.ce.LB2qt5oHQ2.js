"use strict";var dpVisitorName,dpVisitorCity,dpContactNumber,dpVisitorEmail,dpDescription,dpProduct,dpSubmitButton=document.getElementById("dp-submit-button"),dpProductCommandMap=[],dpReCaptchaResponse=(dpProductCommandMap[1]="website",dpProductCommandMap[2]="android",dpProductCommandMap[3]="ios",null);document.addEventListener("DOMContentLoaded",function(){dpSubmitButton.addEventListener("click",function(){(new DpFeedbackForm).onFormSubmitButtonClick()},!1)});class DpFeedbackForm extends DpForm{constructor(){super(),this.ajax_post_request_=null}onFormSubmitButtonClick(){var alertMessageMap={},alertMessageMap=(alertMessageMap["empty-city"]=dpEmptyCityString,alertMessageMap["empty-name"]=dpEmptyUserNameString,alertMessageMap["empty-email"]=dpEmptyEmailIdString,alertMessageMap["empty-mobile"]=dpEmptyMobileNumberString,alertMessageMap["empty-product"]=dpEmptyProductCodeString,alertMessageMap["empty-feedback"]=dpEmptyFeedbackString,alertMessageMap["city-name-suggestion"]=dpCityNameSuggestionString,alertMessageMap["user-name-suggestion"]=dpUserNameTooLongString,alertMessageMap["email-address-suggestion"]=dpEmailIdNotValidString,alertMessageMap["mobile-number-suggestion"]=dpMobileNumberNotValidString,alertMessageMap["product-code-suggestion"]=dpProductCodeNotValidString,alertMessageMap["user-feedback-suggestion"]=dpFeedbackTooLongString,this.validateContactUsForm(alertMessageMap));alertMessageMap["error-flag"]||(void 0===grecaptcha?alert(dpReCaptchaUndefined):(dpReCaptchaResponse=grecaptcha.getResponse())?(DpDialog.showAlertMessage("<br>"+dpWaitGettingResultString,DpImg.kImgSpinnerIcon),setTimeout(function(){$(".dpPopup").slideUp(100)},5e3),alertMessageMap=this.getAjaxRequestDataPayload(),this.postAjaxDataPayload(null,alertMessageMap)):alert(dpReCaptchaResponseUndefined))}fillFormWithSelectedItem(geoData,selectorID){geoData=geoData.split("|");dpVisitorCity=geoData[0],$("#dp-city-search").val(dpVisitorCity)}clearFeedbackForm(){document.querySelector(".dpForm").reset(),"undefined"!=typeof grecaptcha&&grecaptcha.reset()}validateContactUsForm(alertMessageMap){var validationMap=[];return validationMap["error-flag"]=!1,dpVisitorName=document.getElementById("dp-name").value,dpDescription=document.getElementById("dp-comment").value,dpVisitorCity=document.getElementById("dp-city-search").value,dpVisitorEmail=document.getElementById("dp-email").value,dpContactNumber=document.getElementById("dp-mobile").value,dpProduct=document.getElementById("dp-product").value,validationMap["error-flag"]=DpForm.validateName(dpVisitorName,alertMessageMap["empty-name"],alertMessageMap["user-name-suggestion"]),validationMap["error-flag"]||(validationMap["error-flag"]=DpFormUtils.validateEmailID(dpVisitorEmail,alertMessageMap["empty-email"],alertMessageMap["email-address-suggestion"]),validationMap["error-flag"])||(validationMap["error-flag"]=this.validatePhoneNumber(dpContactNumber,alertMessageMap["empty-mobile"],alertMessageMap["mobile-number-suggestion"]),validationMap["error-flag"])||(validationMap["error-flag"]=DpForm.validateName(dpVisitorCity,alertMessageMap["empty-city"],alertMessageMap["city-name-suggestion"]),validationMap["error-flag"])||(validationMap["error-flag"]=this.validateProductCategory(dpProduct,alertMessageMap["empty-product"],alertMessageMap["product-code-suggestion"]),validationMap["error-flag"])||(validationMap["error-flag"]=this.validateFeedback(dpDescription,alertMessageMap["empty-feedback"],alertMessageMap["user-feedback-suggestion"])),validationMap}validateFeedback(feedbackString,alertMessageEmptyFeedback,alertMessageFeedbackSuggestion){let jsErrorFlag=!1;var feedbackLength=feedbackString.trim().length;return""===feedbackString||0===feedbackLength?(alert(alertMessageEmptyFeedback),jsErrorFlag=!0):(feedbackLength<2||5e3<feedbackLength)&&(alert(alertMessageFeedbackSuggestion),jsErrorFlag=!0),jsErrorFlag}validatePhoneNumber(phoneNumber,alertMessageEmptyPhoneNo,alertMessagePhoneNoSuggestion){let jsErrorFlag=!1;var phoneNumberLength=(phoneNumber=(phoneNumber=phoneNumber.trim()).replace(/\+|-| /g,"")).length,reversedPhoneNumber=parseInt(phoneNumber).toString();return""===phoneNumber||0===phoneNumberLength?(alert(alertMessageEmptyPhoneNo),jsErrorFlag=!0):(phoneNumberLength<10||15<phoneNumberLength||reversedPhoneNumber.length<10||-1!==phoneNumber.indexOf("123456789")||-1!==phoneNumber.indexOf("987654321")||phoneNumber.match(/^([0-9])\1*$/))&&(alert(alertMessagePhoneNoSuggestion),jsErrorFlag=!0),jsErrorFlag}validateProductCategory(productType,alertEmptyProductCode,alertProductCodeSuggestion){let jsErrorFlag=!1;productType=parseInt(productType,10),productType=dpProductCommandMap[productType];return void 0!==productType&&0!==productType.length||(alert(alertEmptyProductCode),jsErrorFlag=!0),jsErrorFlag}getAjaxRequestDataPayload(){var response=grecaptcha.getResponse();return{name:dpVisitorName,mobile:dpContactNumber,email:dpVisitorEmail,city:dpVisitorCity,product:dpProduct,description:dpDescription,"g-recaptcha-response":response}}postAjaxDataPayload(resultElementId,payloadJSONData){let self=this;this.ajax_post_request_=$.ajax({type:"POST",url:dpPgContext.ajax_post_url_,data:JSON.stringify({dp_payload:payloadJSONData}),contentType:"application/json; charset=utf-8",beforeSend:function(){null!==self.ajax_post_request_&&self.ajax_post_request_.abort()},success:function(result){$(".dpPopup").slideUp(50);var resultFocusDiv=document.querySelector(".dpResultFocusPoint");document.getElementById("dp-result-content").innerHTML=result,resultFocusDiv.scrollIntoView({behavior:"smooth",block:"start"}),dpSubmitButton.blur(),resultFocusDiv.focus(),self.ajax_post_request_=null,self.clearFeedbackForm()},error:function(){DpDialog.showAlertMessage(dpFailedToGetResultString,DpImg.kImgErrorIcon),setTimeout(function(){$(".dpPopup").slideUp(100)},5e3),self.ajax_post_request_=null}})}}