"use strict";var DpBarChart=function(options){this.options=options,this.canvas=options.canvas,this.ctx=this.canvas.getContext("2d"),this.colors=options.colors,this.drawChart=function(){for(var canvasActualHeight=this.canvas.height-this.options.padding,canvasActualWidth=this.canvas.width-2*this.options.padding,maxValueOffset=this.options.offset.maxValue[0],maxValue=Math.max.apply(null,this.options.data.chart_strength),maxValueUpdated=(maxValueUpdated=(Math.round(100*maxValue)/100).toFixed(2)).replace(".",""),maxValue=canvasActualHeight*(1-1/(maxValueUpdated=parseInt(maxValueUpdated,10)+maxValueOffset))+this.options.padding,maxValueOffset=this.options.offset.barBottomLine[0],lineOffsetY=this.options.offset.barBottomLine[1],numberOfBars=(drawLine(this.ctx,0,maxValue+maxValueOffset,this.canvas.width,maxValue+lineOffsetY,this.options.gridColor),Object.keys(this.options.data.chart_label_small).length),barSize=canvasActualWidth/numberOfBars,barIndex=0;barIndex<numberOfBars;barIndex++){var barColor=this.colors[barIndex%this.colors.length],barLabelColor="#EEEEEE",strength=(0!==Object.keys(this.options.data.chart_area_bar_color).length&&(barLabelColor=this.options.data.chart_area_bar_color[barIndex][0],barColor=this.options.data.chart_area_bar_color[barIndex][1]),this.options.data.chart_strength[barIndex].toString()),strength=(Math.round(100*strength)/100).toFixed(2).replace(".",""),barSizeOffsetX=this.options.offset.barSize[0],barSizeOffsetX=Math.round((canvasActualHeight+barSizeOffsetX)*strength/maxValueUpdated),strength=this.options.padding+barIndex*(2+barSize),barUpperLeftY=this.canvas.height-barSizeOffsetX-this.options.padding,barOffsetX=this.options.offset.bar[0],barOffsetY=this.options.offset.bar[1],barOffsetX=(drawBar(this.ctx,strength+barOffsetX,barUpperLeftY,barSize+barOffsetY,barSizeOffsetX,barColor),this.options.offset.barTopLabel[0]),barOffsetY=this.options.offset.barTopLabel[1],barSizeOffsetX=this.options.data.chart_ranking[barIndex],barColor=(this.ctx.textBaseline="bottom",this.ctx.textAlign="center",this.ctx.fillStyle="#581E00",this.ctx.font="14px Verdana",this.ctx.fillText(barSizeOffsetX,strength+barOffsetX,barUpperLeftY+barOffsetY),this.options.offset.barBottomLabel[0]),barSizeOffsetX=this.options.offset.barBottomLabel[1],barOffsetX=this.options.data.chart_label_small[barIndex],barOffsetY=(this.ctx.textBaseline="bottom",this.ctx.textAlign="center",this.ctx.fillStyle="#581E00",this.ctx.font="12px Verdana",this.ctx.fillText(barOffsetX,strength+barColor,this.canvas.height+barSizeOffsetX),barUpperLeftY=this.canvas.height+this.options.offset.barInsideTranslate[1],this.options.offset.barInsideLabel[0]),barOffsetX=this.options.offset.barInsideLabel[1];this.ctx.save(),0!==Object.keys(this.options.data.chart_label_big).length&&(barColor=this.options.data.chart_label_big[barIndex],this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.fillStyle=barLabelColor,this.ctx.font="12px Verdana",this.ctx.translate(strength,barUpperLeftY),this.ctx.rotate(90*Math.PI/180),this.ctx.fillText(barColor,barOffsetY,-barSize/2+barOffsetX)),this.ctx.restore()}}};function drawLine(ctx,start_x,start_y,end_x,end_y,color){ctx.save(),ctx.strokeStyle=color,ctx.beginPath(),ctx.lineWidth=.4,ctx.moveTo(start_x,start_y),ctx.lineTo(end_x,end_y),ctx.stroke(),ctx.restore()}function drawBar(ctx,upper_left_corner_x,upper_left_corner_y,width,height,color){ctx.save(),ctx.fillStyle=color,ctx.fillRect(upper_left_corner_x,upper_left_corner_y,width,height),ctx.restore()}