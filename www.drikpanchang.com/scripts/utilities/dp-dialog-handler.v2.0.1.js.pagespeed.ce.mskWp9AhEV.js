"use strict";class DpDialogHandler{addUserDataInLocalCache(){throw new Error("Method 'addUserDataInLocalCache()' must be implemented.")}addUserDataInCloudDatabase(){throw new Error("Method 'addUserDataInCloudDatabase()' must be implemented.")}getLoginConfirmationMessageHTML(){throw new Error("Method 'getLoginConfirmationMessageHTML()' must be implemented.")}getDataConfirmationMessageHTML(){throw new Error("Method 'getDataConfirmationMessageHTML()' must be implemented.")}showDataConfirmationDialog(){throw new Error("Method 'showDataConfirmationDialog()' must be implemented.")}handleDataWithoutUserSignIn(){throw new Error("Method 'handleDataWithoutUserSignIn()' must be implemented.")}handleDataOnSuccessfulSignIn(){throw new Error("Method 'handleDataOnSuccessfulSignIn()' must be implemented.")}handlePopupFlowAborted(){throw new Error("Method 'handlePopupFlowAborted()' must be implemented.")}setContextBeforeLaunchingPopup(){throw new Error("Method 'setContextBeforeLaunchingPopup()' must be implemented.")}constructor(){}showConfirmationBox(confirmationMessage,yesFunctionCall,noFunctionCall){var confirmBoxWrapper=$('<div class="dpOverlay" id="dp-form-confirm-box-wrapper"></div>'),confirmBox=$('<div class="dpConfirmBox" id="dp-form-confirm-box"></div>');this.createConfirmationBoxUI(confirmationMessage,confirmBoxWrapper,confirmBox),this.attachConfirmationBoxUIWithBody(confirmBoxWrapper),this.setCancelButtonClickListener(confirmBox,noFunctionCall),this.setConfirmButtonClickListener(confirmBox,yesFunctionCall)}showTwinFormConfirmationBox(confirmationMessage,yesFunctionCall,noFunctionCall){var confirmBoxWrapper=$('<div class="dpOverlay" id="dp-form-confirm-box-wrapper"></div>'),confirmBox=$('<div class="dpConfirmBox dpConfirmBoxExt" id="dp-form-confirm-box"></div>');this.createConfirmationBoxUI(confirmationMessage,confirmBoxWrapper,confirmBox),this.attachConfirmationBoxUIWithBody(confirmBoxWrapper),this.setCancelButtonClickListener(confirmBox,noFunctionCall),this.setConfirmButtonClickListener(confirmBox,yesFunctionCall)}showSignInConfirmationBox(confirmationMessage,yesFunctionCall,noFunctionCall){let confirmBoxWrapper=$("#dp-signin-confirm-box-wrapper"),confirmBox=confirmBoxWrapper.find("#dp-signin-confirm-box");0!==confirmBoxWrapper.length?confirmBoxWrapper.show():(confirmBoxWrapper=$('<div class=" dpOverlay" id="dp-signin-confirm-box-wrapper"></div>'),confirmBox=$('<div class="dpConfirmBox" id="dp-signin-confirm-box"></div>'),this.createConfirmationBoxUI(confirmationMessage,confirmBoxWrapper,confirmBox),this.updateConfirmationBoxButtonUIForGoogleSignIn(confirmBox),this.attachConfirmationBoxUIWithBody(confirmBoxWrapper),this.setCancelButtonClickListener(confirmBox,noFunctionCall),this.setConfirmButtonClickListener(confirmBox,yesFunctionCall)),this.setLoginOptionRadioButtonClickListener(confirmBox)}attachConfirmationBoxUIWithBody(confirmBoxWrapper){$("body").append(confirmBoxWrapper),confirmBoxWrapper.fadeIn(300)}createConfirmationBoxUI(confirmationMessage,confirmBoxWrapper,confirmBox){var dialogDiv=$('<div id="dp-dialog-div"></div>'),confirmationMessage=(dialogDiv.append(confirmationMessage),$('<div id="dp-button-wrapper"></div>')),cancelButton=$('<button type="button" class="dpButton" role="button" id="dp-button-cancel">'+dpCancelString+"</button>"),confirmButton=$('<button type="button" class="dpButton" role="button" id="dp-button-confirm">'+dpConfirmString+"</button>");confirmationMessage.append(cancelButton),confirmationMessage.append(confirmButton),confirmBox.append(dialogDiv),confirmBox.append(confirmationMessage),confirmBoxWrapper.append(confirmBox)}proceedAfterDataConfirmation(){dpSignIn.authenticated_user_flag_?(this.addUserDataInCloudDatabase(),DpDialogHandler.removeActionConfirmationBoxAndOverlay()):this.showSignInOptions()}showSignInOptions(){this.setContextBeforeLaunchingPopup(),DpDialogHandler.removeActionConfirmationBoxAndOverlay();var formConfirmationMessage=this.getLoginConfirmationMessageHTML();this.showSignInConfirmationBox(formConfirmationMessage,this.handleDataWithoutUserSignIn.bind(this),this.handlePopupFlowAborted)}updateConfirmationBoxButtonUIForGoogleSignIn(confirmBox){var confirmButton=confirmBox.find("#dp-button-confirm");dpSignIn.authenticated_user_flag_||$("#dp-save-without-login").is(":checked")?confirmButton.show():(confirmButton.hide(),this.addGoogleSignInButtonUI(confirmBox))}setLoginOptionRadioButtonClickListener(confirmBox){document.querySelectorAll("input[name='radio_button_login_option']").forEach(input=>{input.addEventListener("change",function(e){var confirmButton=confirmBox.find("#dp-button-confirm"),googleSignInButtonWrapper=$(".dpFormSignInButtonWrapper"),googleSignInButton=googleSignInButtonWrapper.find(".dpSignInMediumButton");"dp-save-without-login"===e.currentTarget.id?(confirmButton.show(),googleSignInButtonWrapper.hide(),googleSignInButton.hide()):(confirmButton.hide(),googleSignInButtonWrapper.show(),googleSignInButton.show())})})}setCancelButtonClickListener(confirmBox,noFunctionCall){var cancelButton=$("#dp-button-cancel");cancelButton.trigger("focus"),cancelButton.on("click",function(){noFunctionCall()})}setConfirmButtonClickListener(confirmBox,yesFunctionCall){confirmBox.find("#dp-button-confirm").on("click",function(){yesFunctionCall()})}addGoogleSignInButtonUI(confirmBox){var confirmBox=confirmBox.find("#dp-button-wrapper"),signInButtonWrapper=$(".dpFormSignInButtonWrapper"),signInButton=$(".dpSignInMediumButton");signInButtonWrapper.css({display:"inline-block"}),signInButton.css({display:"inline-block"}),signInButtonWrapper.appendTo(confirmBox)}static removeActionConfirmationBoxAndOverlay(){$("#dp-form-confirm-box-wrapper").remove(),$("#dp-signin-confirm-box-wrapper").hide()}static removeSignInOverlay(){$(".dpOverlay").fadeOut(0).remove()}}