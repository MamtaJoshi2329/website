"use strict";var dpAbortRunningAjaxRequest=!1,dpVimshottariDialogGroupStatus="open",dpUniJSCache=[];function showVimshottariDashaTable(resultHTML){var resultHTML=dpSettingsToolbar.createDialogPopup(resultHTML,468,920,20,""),dashaTitle=(resultHTML.bind("dialogclose",function(event,ui){closeVimshottariDashaTable(event)}),resultHTML.dialogExtend({minimize:function(event,dlg){"open"===dpVimshottariDialogGroupStatus&&(dpVimshottariDialogGroupStatus="minimised",dpUniJSCache.ls_kDashaDialogSerializedIDKey.split(";").forEach(function(dialogId,dialogIdx){event.target.id!==dialogId&&$("#"+dialogId).dialogExtend("minimize")})),dpSettingsToolbar.styleDialogOnMinimize(event)},restore:function(event,dlg){"minimised"===dpVimshottariDialogGroupStatus&&(dpVimshottariDialogGroupStatus="open",dpUniJSCache.ls_kDashaDialogSerializedIDKey.split(";").forEach(function(dialogId,dialogIdx){event.target.id!==dialogId&&$("#"+dialogId).dialogExtend("restore")})),dpSettingsToolbar.styleDialogOnRestore(event)}}),resultHTML.find(".dpVimshottariDashaTable").attr("data-title"));resultHTML.dialog("option","title",dashaTitle),updateDashaDialogCache(resultHTML),setDashaRowClickEvent(resultHTML)}function updateDashaDialogCache(dialog){var dialog=dialog.prop("id"),dashaDialogSerializedIdList=dpUniJSCache.ls_kDashaDialogSerializedIDKey;null==dashaDialogSerializedIdList||""===dashaDialogSerializedIdList?dashaDialogSerializedIdList=dialog:dashaDialogSerializedIdList+=";"+dialog,dpUniJSCache.ls_kDashaDialogSerializedIDKey=dashaDialogSerializedIdList}function setDashaRowClickEvent(dialog){dialog.on("click",".dpDashaRow",function(){dpAbortRunningAjaxRequest=!1,dpDialogHeightTopMargin+=35,dpPageForm.validateKundaliForm();var payloadData=dpKundaliPost.getAjaxRequestDataPayload(),payloadData=(addKundaliSubDashaPayload(payloadData,$(this)),JSON.stringify({dp_payload:payloadData})),payloadData=(dpKundaliPost.postAjaxDataPayload("dp-result-content",payloadData),$(this).parent().parent().attr("id")),clickedDashaTable=$("#"+payloadData+" .dpVimshottariDashaTable");$("#"+payloadData+" .dpVimshottariDashaTable .dpDashaRow").css({cursor:"not-allowed"}),clickedDashaTable.on("click",disableTableRowClickHandler)})}function closeVimshottariDashaTable(event){dpAbortRunningAjaxRequest=!0;var targetDialogId=event.target.id,event=dpUniJSCache.ls_kDashaDialogSerializedIDKey;if(event){for(var dashaDialogIdList=event.split(";"),tableIndex=dashaDialogIdList.length-1;0<=tableIndex;tableIndex--){var dialogId=dashaDialogIdList[tableIndex],parentDialogId=1<=tableIndex?dashaDialogIdList[tableIndex-1]:-1;if(-1!==parentDialogId?($("#"+parentDialogId+" .dpVimshottariDashaTable .dpDashaRow").css({cursor:"pointer"}),$("#"+parentDialogId+" .dpVimshottariDashaTable").off()):($(".dpVimshottariButton").prop("disabled",!1).removeClass("dpDisabledButton"),dpVimshottariDialogGroupStatus="open"),$("[aria-describedby="+dialogId+"]").remove(),dashaDialogIdList.pop(),dpDialogHeightTopMargin-=35,dialogId===targetDialogId){dpDialogHeightTopMargin=0;break}}dpUniJSCache.ls_kDashaDialogSerializedIDKey=dashaDialogIdList.join(";")}}dpUniJSCache.splice("ls_kDashaDialogSerializedIDKey",1);var dpResultContent=$("#dp-result-content");function disableTableRowClickHandler(){return DpDialog.showAlertMessage(dpCloseDashaWindowMessage,DpImg.kImgErrorIcon),setTimeout(function(){$(".dpPopup").slideUp(200)},2e3),!1}function addKundaliSubDashaPayload(kundaliPayload,rowElement){var dashaLord=rowElement.attr("data-lord"),dashaCycle=rowElement.attr("data-dasha-cycle"),dashaBeginTime=rowElement.attr("data-begin-time"),dashaEndTime=rowElement.attr("data-end-time"),rowElement=rowElement.attr("data-flow");kundaliPayload.kundali_dasha={dasha:"vimshottari",dasha_lord:dashaLord,dasha_cycle:dashaCycle,dasha_begins:dashaBeginTime,dasha_ends:dashaEndTime,dasha_flow:rowElement}}function addKundaliDashaPayload(kundaliPayload){kundaliPayload.kundali_dasha={dasha:"vimshottari",dasha_cycle:"maha-dasha",dasha_year_type:"sidereal-year",dasha_flow:""}}dpResultContent.on("click",".dpVimshottariButton",function(){dpAbortRunningAjaxRequest=!1;$(".dpVimshottariButton").prop("disabled",!0).addClass("dpDisabledButton"),dpPageForm.validateKundaliForm();var payloadData=dpKundaliPost.getAjaxRequestDataPayload(),payloadData=(addKundaliDashaPayload(payloadData),JSON.stringify({dp_payload:payloadData}));dpKundaliPost.postAjaxDataPayload("dp-result-content",payloadData)});