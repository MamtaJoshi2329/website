"use strict";class DpDigitalTimer{constructor(){this.request_time_=null,this.zone_info_=null,this.sec_counter_=0,this.clock_hour_="-1",this.clock_minute_="-1",this.clock_second_="-1",this.clock_date_="",this.clock_next_refresh_=10,this.ajax_obj_=this.getXMLHttpRequestObject(),this.refresh_delay_on_error_=15}getXMLHttpRequestObject(){let xmlHttpRequestObject=!1;return window.XMLHttpRequest?xmlHttpRequestObject=new XMLHttpRequest:window.ActiveXObject&&(xmlHttpRequestObject=new ActiveXObject("Microsoft.XMLHTTP")),xmlHttpRequestObject||(alert("Your browser does not support Ajax."),!1)}getServerClockTime(){if(this.ajax_obj_){var postURL=DpPg.kDigitalClock,cacheFix=(new Date).getTime();this.ajax_obj_.open("POST",postURL+"?dummyTs"+cacheFix),this.ajax_obj_.setRequestHeader("Content-Type","application/x-www-form-urlencoded");let self=this;this.ajax_obj_.onload=function(){self.ajax_obj_.readyState===self.ajax_obj_.DONE&&200===self.ajax_obj_.status&&self.handleResponse.bind(self)},this.request_time_=new Date,this.ajax_obj_.send("olson-timezone="+encodeURIComponent(dpEssential.olson_timezone_))}}handleResponse(){var elapsedSeconds;4===this.ajax_obj_.readyState&&(200===this.ajax_obj_.status?((elapsedSeconds=((new Date).getTime()-this.request_time_.getTime())/1e3/2)<1?(this.zone_info_=this.ajax_obj_.responseText,this.splitZoneInfoIntoClockTm(),this.clock_second_="0"===this.clock_second_[0]?parseInt(this.clock_second_[1],10):parseInt(this.clock_second_,10),this.clock_second_+=elapsedSeconds,this.clock_second_=Math.round(this.clock_second_)):this.clock_next_refresh_=10,0<(elapsedSeconds=parseInt(this.clock_next_refresh_,10))&&elapsedSeconds<=300&&setTimeout(this.getServerClockTime.bind(this),1e3*elapsedSeconds)):setTimeout(this.getServerClockTime.bind(this),1e3*this.refresh_delay_on_error_))}splitZoneInfoIntoClockTm(){if(new RegExp("[0-9]{4}-[0-9]{2}:[0-9]{2}-[0-9]{2}-[0-9]{1,4}").test(this.zone_info_)){var clockParts=this.zone_info_.split("-");let clockHHMM=clockParts[1];var clockSS=clockParts[2];this.clock_next_refresh_=clockParts[3],clockHHMM=clockHHMM.split(":"),this.clock_hour_=parseInt(clockHHMM[0],10),this.clock_minute_=parseInt(clockHHMM[1],10),this.clock_second_=parseInt(clockSS,10),this.clock_date_=clockParts[0]}else console.log("Invalid time : "+this.zone_info_)}startClockTicking(){setTimeout(this.startClockTicking.bind(this),1e3),0===this.sec_counter_&&(clockHHMMHtml=document.getElementById("dp-clock-hhmm").getAttribute("data-hhmm"),clockSSHtml=document.getElementById("dp-clock-ss").getAttribute("data-ss"),clockHHMMHtml=clockHHMMHtml.split(":"),this.clock_hour_=parseInt(clockHHMMHtml[0],10),this.clock_minute_=parseInt(clockHHMMHtml[1],10),this.clock_second_=parseInt(clockSSHtml,10),this.clock_date_=document.getElementById("dp-clock-date").innerHTML,this.sec_counter_++),this.clock_second_+=1,60<=this.clock_second_&&(this.clock_second_-=60,this.clock_minute_++),60<=this.clock_minute_&&(this.clock_minute_-=60,this.clock_hour_++),this.clock_hour_-=24*Math.floor(this.clock_hour_/24);var clockHHMMHtml=DpDtTiUtils.getPaddedNumberString(this.clock_hour_),clockSSHtml=DpDtTiUtils.getPaddedNumberString(this.clock_minute_),displayClockSecond=DpDtTiUtils.getPaddedNumberString(this.clock_second_),clockHHMMHtml=(clockHHMMHtml+":"+clockSSHtml).replace(/[0123456789]/g,dpEssential.replaceNumerals.bind(dpEssential)),clockSSHtml=displayClockSecond.toString().replace(/[0123456789]/g,dpEssential.replaceNumerals.bind(dpEssential)),displayClockSecond=(document.getElementById("dp-clock-hhmm").innerHTML=clockHHMMHtml,document.getElementById("dp-clock-ss").innerHTML=":"+clockSSHtml,document.getElementById("dp-clock-date").innerHTML=this.clock_date_,document.getElementById("dp-hour-minute-timer-id")),pageSpecificSecondTimer=document.getElementById("dp-second-timer-id");displayClockSecond&&(displayClockSecond.innerHTML=clockHHMMHtml),pageSpecificSecondTimer&&(pageSpecificSecondTimer.innerHTML=":"+clockSSHtml)}}class DpMuhurtaTimer{constructor(){this.time_left_to_reload_=null,this.muhurta_time_left_in_ticks_=null,this.tick_duration_in_milli_secs_=null}startTimer(){var duration,displayElement;-1===this.time_left_to_reload_?(duration=this.muhurta_time_left_in_ticks_,displayElement=document.querySelector("#dpMuhurtaTimerId"),this.updateMuhuratTimer(duration,displayElement)):0<=this.time_left_to_reload_&&setInterval(function(){location=location.href},1e3*this.time_left_to_reload_)}updateMuhuratTimer(duration,displayElement){Math.trunc||(Math.trunc=function(v){return v<0?Math.ceil(v):Math.floor(v)});let timer=duration,hours,minutes,seconds;setInterval(function(){hours=Math.trunc(timer/3600),minutes=Math.trunc(timer/60%60),seconds=Math.trunc(timer%60),hours=DpDtTiUtils.getPaddedNumberString(hours),minutes=DpDtTiUtils.getPaddedNumberString(minutes),seconds=DpDtTiUtils.getPaddedNumberString(seconds);var time=hours+":"+minutes+":"+seconds;displayElement.textContent=time.replace(/[0123456789]/g,dpEssential.replaceNumerals.bind(dpEssential)),--timer<0&&(timer=duration,location=location.href)},this.tick_duration_in_milli_secs_)}}